# Redis Configuration for Persistence
# Save data to disk to survive restarts

# RDB Persistence (Snapshot)
save 900 1      # Save every 15 minutes if at least 1 key changed
save 300 10     # Save every 5 minutes if at least 10 keys changed  
save 60 10000   # Save every 1 minute if at least 10000 keys changed

# RDB file location
dir /var/lib/redis
dbfilename dump.rdb

# Enable RDB compression
rdbcompression yes

# AOF Persistence (Append Only File)
appendonly yes
appendfilename "appendonly.aof"

# AOF sync frequency
appendfsync everysec  # Sync every second (good balance)

# Disable AOF rewrite for small datasets
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Memory management
maxmemory 256mb
maxmemory-policy allkeys-lru

# Logging
loglevel notice
logfile /var/log/redis/redis-server.log 